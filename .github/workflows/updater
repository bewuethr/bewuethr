#!/usr/bin/env bash

weekday=$(date '+%A')

leisure=(
	'fiddling with my [dotfiles](https://github.com/bewuethr/dotfiles)'
	'finally adding refraction to my [terminal raytracer](https://github.com/bewuethr/bash-raytracer)'
	'polishing my [static site generator](https://github.com/bewuethr/pandoc-bash-blog)'
	'crafting a fascinating [blog post](https://www.benjaminwuethrich.dev)'
)

case $weekday in
	Saturday | Sunday)
		activity=${leisure[RANDOM % ${#leisure[@]}]}
		;;
	*)
		activity='working for [this bunch](https://github.com/kohofinancial)'
		;;
esac

cat <<- EOF > README.md
	### Hi there :wave:

	It's $weekday! During my waking hours, I might be $activity.
EOF

# Suppress detached HEAD warning
git config advice.detachedHead false

# Set git name and email
git config --global user.name "github-actions"
git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"

if [[ -n $(git status --porcelain) ]]; then
	git add README.md
	git commit --message "Update README"
	git push
fi
